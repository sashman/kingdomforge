<!doctype html>
<html>
<head>
	<script src="/socket.io/socket.io.js"></script>
	<script src="lib/crafty-min.js"></script>
	<script src="modules/bootstrapper.js"></script>
	<script src="modules/player.js"></script>
	<script src="modules/playercollection.js"></script>
	<script src="modules/connector.js"></script>
	<script src="modules/otherplayers.js"></script>




	<script>
		window.addEventListener('load', function() {
			var bootStrapper = new BootStrapper();
			bootStrapper.bootStrap();

			var connector = new Connector(io);
			var socket = connector.requestNewConnection();
			var otherPlayers = null;
			var player = null;
			var players = [];

			socket.on('connected', function (data) {
				player = new Player(true, data.id);
				player.setSocket(socket);
				var players = new PlayerCollection();
				for (var i = data.players.length - 1; i >= 0; i--) {
					players.addPlayer( new Player(false, data.players[i].id, data.players[i].r, data.players[i].g, data.players[i].b, data.players[i].x, data.players[i].y) );
				};
				otherPlayers = new OtherPlayers(socket, players);
				otherPlayers.setLocalPlayerId(data.id);
				socket.emit('createdplayer', player.getPlayerInfo());
			});
		});
	</script>




	<style type="text/css" media="screen">
		body {
		  	background: black;
		  	text-align: center;
		  	color: #DDD;
		  	font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
		}

		.controls {
		  color: #BBB;
		}

		#cr-stage { margin: 20px auto 0; }

		.bottom {
		  font-size: 12px;
		  color: #888;
		  margin-top: 50px;
		}

		.bottom a {
		  color: #AAA;
		}
	</style>
	

	
	<title>KingdomForge</title>
</head>
<body>
	<h1>KingdomForge</h1>
</body>
</html>
