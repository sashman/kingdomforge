<!doctype html>
<html>
<head>
	<script src="/socket.io/socket.io.js"></script>
	<!--<script src="lib/crafty-min.js"></script>-->
	<script src="modules/client_game_initialiser.js"></script>
	
	<script src="modules/input_handler.js"></script>
	<script src="modules/pinger.js"></script>
	<script src="modules/character.js"></script>
	<script src="modules/terrain_requester.js"></script>
	<script src="modules/tile.js"></script>
	<script src="modules/terrain.js"></script>
	<script src="modules/collection.js"></script>
	<script src="modules/connector.js"></script>
	<script src="modules/other_players.js"></script>
	<script src="modules/scene_loader.js"></script>

	<!-- TODO: do not expose node_modules -->
	<script src="crafty_client.js"></script>
	<script src="npm_crafty.js"></script>

	<script>
		window.addEventListener('load', function() {


			var npm_crafty = require("npm_crafty");
			npm_crafty.setupDefault(function() { //immediate callback after Crafty with Crafty.net is available
				//create Crafty Client
				Crafty = npm_crafty.createClient("player");
				
				var scence_loader = new exports();
				//start the loading scene of our game
				scence_loader.initScene();

			}, function(socket) { //connect callback
				//bind to socket
				npm_crafty.setServer(Crafty, socket);
				var game = new ClientGameInitialiser(socket);
				game.initialiseClientGame();


			}, function(socket) { // disconnect callback
			});

		});
	</script>

	<style type="text/css" media="screen">
		body {
		  	background: black;
		  	text-align: center;
		  	color: #DDD;
		  	font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
		}

		.controls {
		  color: #BBB;
		}

		#cr-stage { margin: 20px auto 0; }

		.bottom {
		  font-size: 12px;
		  color: #888;
		  margin-top: 50px;
		}

		.bottom a {
		  color: #AAA;
		}
	</style>
		
	<title>KingdomForge</title>
</head>
<body>
	<h1>KingdomForge</h1>
</body>
</html>
